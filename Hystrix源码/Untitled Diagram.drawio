<mxfile host="app.diagrams.net" modified="2021-02-22T15:53:38.496Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.150 Safari/537.36 Edg/88.0.705.68" etag="eK-4UTokBDUOewSBbqgW" version="13.6.6" type="github">
  <diagram id="I9v6BUT11tq5PBzdTSEy" name="116. HystrixCommand把任务丢入线程池-toObservable()方法">
    <mxGraphModel dx="2076" dy="1160" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-3" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;dashed=1;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="2284" y="2051" width="251.67" height="130" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-6" target="aYNqQ8mElyGrv2AiK-6F-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-5" value="@Import clientReigstar" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-4">
          <mxGeometry x="-0.1474" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-6" value="@EnableFeignClients启用feign" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;align=center;" vertex="1" parent="1">
          <mxGeometry x="72" y="229" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-11" target="aYNqQ8mElyGrv2AiK-6F-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-11" target="aYNqQ8mElyGrv2AiK-6F-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-11" target="aYNqQ8mElyGrv2AiK-6F-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;dashed=1;endArrow=none;endFill=0;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-11" target="aYNqQ8mElyGrv2AiK-6F-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-11" value="FeignClientsRegistrar" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;align=center;strokeColor=#B3FF66;" vertex="1" parent="1">
          <mxGeometry x="422" y="229" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-12" value="ImportBeanDefinitionRegistrar: 向spring里注册bean" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;align=center;dashed=1;dashPattern=1 1;" vertex="1" parent="1">
          <mxGeometry x="312" y="79" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-13" value="ResourceLoaderAware: 拿到resource" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;align=center;" vertex="1" parent="1">
          <mxGeometry x="582" y="79" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-14" value="EnvironmentAware: 拿到env" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;align=center;" vertex="1" parent="1">
          <mxGeometry x="582" y="139" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-15" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-27" target="aYNqQ8mElyGrv2AiK-6F-22">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-16" value="解释" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-15">
          <mxGeometry x="-0.4518" y="-4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;exitX=0.5;exitY=1;exitDx=0;exitDy=0;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-21" target="aYNqQ8mElyGrv2AiK-6F-30">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-18" value="2. 注册feignClint: 名字叫: {serverName}FeignClient" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-17">
          <mxGeometry x="-0.5519" y="-2" relative="1" as="geometry">
            <mxPoint y="77" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-21" target="aYNqQ8mElyGrv2AiK-6F-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-20" value="1.2, 注入feignClient的配置类" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-19">
          <mxGeometry x="-0.688" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-21" value="registerBeanDefinitions(annotation, beanRegistry):&lt;br&gt;1. 引入configuration, 这个一般没有&lt;br&gt;2. 扫描引入feignClient:&amp;nbsp;&lt;br&gt;2.1 扫描所有的feignClient的接口&lt;br&gt;2.2. 加载这个接口为feignClient准备的config&lt;br&gt;&lt;b&gt;&lt;font color=&quot;#00ff00&quot;&gt;2.3. 注册一个feignCLientFacotryBean给spring&lt;/font&gt;&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="372" y="329" width="300" height="110" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-22" value="&lt;pre style=&quot;background-color: rgb(255 , 255 , 255) ; font-size: 9.8pt&quot;&gt;&lt;font face=&quot;Helvetica&quot; color=&quot;#000000&quot;&gt;feignCLient的配置bean名字叫: &quot;{serverName}.org.server.ServerApplication.FeignClientSpecification&quot;&lt;/font&gt;&lt;/pre&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="818" y="382" width="585" height="37" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-24" target="aYNqQ8mElyGrv2AiK-6F-11">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-24" value="基于spring的注册factoryBean" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="659" y="229" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;endArrow=none;endFill=0;dashed=1;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-26" target="aYNqQ8mElyGrv2AiK-6F-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-26" value="FeignClientsFactoryBean: 创建feignClient代理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" vertex="1" parent="1">
          <mxGeometry x="863.5" y="729" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-27" value="FeignClientSpecification: feignClient的配置包装类" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#eaf3ff;align=center;strokeColor=#8db9ff;" vertex="1" parent="1">
          <mxGeometry x="782" y="466" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-30" target="aYNqQ8mElyGrv2AiK-6F-36">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-29" value="@Autowire注入bean:&amp;nbsp;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-28">
          <mxGeometry x="-0.5907" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-30" value="创建一个beanDefinition, 然后包装在一个beanDefinitionHolder里" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=center;" vertex="1" parent="1">
          <mxGeometry x="402" y="783" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.476;entryY=0.983;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-32" target="aYNqQ8mElyGrv2AiK-6F-30">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-32" value="构造器模式" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="436" y="878" width="120" height="32" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;startArrow=none;fontSize=12;fillColor=#ffecf1;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-36" target="aYNqQ8mElyGrv2AiK-6F-44">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-34" value="1. 拿到属于自己{serverName{}的spring" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-33">
          <mxGeometry x="-0.6529" y="1" relative="1" as="geometry">
            <mxPoint x="55.71" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-35" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-36" target="aYNqQ8mElyGrv2AiK-6F-43">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-36" value="getObject(): 直接调getTarget():&amp;nbsp;&lt;br&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;1. 从spring里拿到FeignContext, 然后拿出builder, hystrixFeignBuilder.&lt;br&gt;&lt;/font&gt;&lt;/b&gt;2. 从feignContext里拿出来用户配置的logger, decoder... 然后配置builder&lt;br&gt;3. 拼接代理的serviceName的URL, 把type, name, url包装成target. &lt;br&gt;然后loadBalance返回" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;strokeColor=#528BFF;" vertex="1" parent="1">
          <mxGeometry x="832" y="859" width="263" height="119" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-43" target="aYNqQ8mElyGrv2AiK-6F-70">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-38" value="1. 拿到client" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-37">
          <mxGeometry x="-0.5266" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-43" target="aYNqQ8mElyGrv2AiK-6F-73">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-40" value="2. 拿到targeter" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-39">
          <mxGeometry x="-0.7848" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-43" target="aYNqQ8mElyGrv2AiK-6F-80">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-42" value="3. target" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-41">
          <mxGeometry x="-0.8019" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-43" value="loadBalance(builder, context, target):&amp;nbsp;&lt;br&gt;1. 拿到client, 塞到builder里&lt;br&gt;2. 拿到targeter&lt;br&gt;3. 调用targeter.target(builder, context, target)" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="832" y="1109" width="263" height="107" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-44" value="FeignContext:&amp;nbsp;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" vertex="1" parent="1">
          <mxGeometry x="1292" y="718" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-55" target="aYNqQ8mElyGrv2AiK-6F-44">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-46" value="默认配置" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-45">
          <mxGeometry x="-0.3333" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-55" target="aYNqQ8mElyGrv2AiK-6F-56">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-48" value="配置" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-47">
          <mxGeometry x="-0.5913" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-55" target="aYNqQ8mElyGrv2AiK-6F-57">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1698.5" y="838" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-50" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-55" target="aYNqQ8mElyGrv2AiK-6F-58">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-51" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-55" target="aYNqQ8mElyGrv2AiK-6F-59">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-55" target="aYNqQ8mElyGrv2AiK-6F-60">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-53" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#eaf3ff;strokeColor=#8db9ff;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-55" target="aYNqQ8mElyGrv2AiK-6F-65">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-54" value="自己找不到就去&lt;br&gt;父配置找bean" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-53">
          <mxGeometry x="-0.3659" y="-1" relative="1" as="geometry">
            <mxPoint y="-19.07" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-55" value="FeignClientsConfiguration: feignclient各个组件和builder的默认配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#eaf3ff;align=center;strokeColor=#8db9ff;" vertex="1" parent="1">
          <mxGeometry x="1591.5" y="718" width="213" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-56" value="&lt;font color=&quot;#ff0000&quot;&gt;feign.builder()&lt;br&gt;引入了Hystrix, 所以&lt;b&gt;HystrixFeign.builder&lt;/b&gt;&lt;/font&gt;" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="1529" y="828.43" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-57" value="logger" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="1727.5" y="798.43" width="80" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-58" value="encoder" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="1727.5" y="834.43" width="80" height="29" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-59" value="decoder" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="1727.5" y="866.43" width="80" height="29" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-60" value="contract:&lt;br&gt;SpringMvcContract" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="1727.5" y="895.43" width="105" height="34" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-65" target="aYNqQ8mElyGrv2AiK-6F-67">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-65" target="aYNqQ8mElyGrv2AiK-6F-68">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-65" target="aYNqQ8mElyGrv2AiK-6F-69">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-64" value="引入三类情况" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-63">
          <mxGeometry x="-0.5959" relative="1" as="geometry">
            <mxPoint x="-0.2599999999999998" y="-14.829999999999998" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-65" value="FeignRibbonClientAutoConfiguration: feign结合ribbon的配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#eaf3ff;align=center;strokeColor=#8db9ff;" vertex="1" parent="1">
          <mxGeometry x="1612" y="959" width="213" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-66" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-67" target="aYNqQ8mElyGrv2AiK-6F-70">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-67" value="DefaultFeignLoadBalancedConfig" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#eaf3ff;align=center;strokeColor=#8db9ff;" vertex="1" parent="1">
          <mxGeometry x="1482" y="1039" width="213" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-68" value="OKHttpFeignLoadBalancedConfiguration" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#eaf3ff;align=center;strokeColor=#8db9ff;" vertex="1" parent="1">
          <mxGeometry x="1772" y="1019" width="213" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-69" value="HttpClientFeignLoadBalancedConfiguration" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#eaf3ff;align=center;strokeColor=#8db9ff;" vertex="1" parent="1">
          <mxGeometry x="1772" y="1069" width="213" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-70" value="client: LoadBalancerFeignClient" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="1508.5" y="1109" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-71" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-72" target="aYNqQ8mElyGrv2AiK-6F-73">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-72" value="FeignAutoConfigurations: feign-starter的默认config" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#eaf3ff;align=center;strokeColor=#8db9ff;" vertex="1" parent="1">
          <mxGeometry x="1619.5" y="1180" width="213" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-73" value="target:&amp;nbsp;&lt;br&gt;HystrixTargeter" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="1542.5" y="1250" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-74" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;dashed=1;endArrow=none;endFill=0;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-75" target="aYNqQ8mElyGrv2AiK-6F-80">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-75" value="HystrixTargeter: 默认targeter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" vertex="1" parent="1">
          <mxGeometry x="934.25" y="1379" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-76" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-80" target="aYNqQ8mElyGrv2AiK-6F-85">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-77" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;strokeColor=#FF0000;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-80" target="aYNqQ8mElyGrv2AiK-6F-246">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="920" y="1750" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-78" value="正式接入Hystrix: target方法" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-77">
          <mxGeometry x="-0.3758" y="-43" relative="1" as="geometry">
            <mxPoint x="43.25" y="-4" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-79" value="4. Hystrix需要的东西都搞好了" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-77">
          <mxGeometry x="-0.1229" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-80" value="target(factoryBean, feign.Builder, context, hardCodeTarget)&lt;br&gt;1. 上来判断builder类型, 发现不是HystrixFeign.builder(), 就直接调用defaultFeign.Builder()的target(hardCodeTarget)&lt;br&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;2. 如果是的话就接入Hystrix了&lt;br&gt;3. 拿到setter?&lt;br&gt;4. 拿到feignCLientFactoryBean里面我们配置的fallback和fallbackFactory, &lt;br&gt;- 只能配一个, 因为拿到一个就马上feign.target了&lt;br&gt;- 会检查fallback和factory必须j实现API接口的&lt;br&gt;5. 根据上面拿到的fallback类还是factory调用HystrixFeign.Builder的target方法&lt;/font&gt;&lt;br&gt;&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="863.5" y="1458" width="341.5" height="161" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-81" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;dashed=1;strokeColor=#ffcd5a;endArrow=none;endFill=0;fillColor=#fff9e7;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-83" target="aYNqQ8mElyGrv2AiK-6F-85">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-82" value="Builder里的方法, 搞不懂这个设计模式" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-81">
          <mxGeometry x="0.5131" relative="1" as="geometry">
            <mxPoint x="32" y="1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-83" value="Feign" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="1662" y="1389" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-84" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.207;entryY=0.015;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-85" target="aYNqQ8mElyGrv2AiK-6F-88">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-85" value="target(hardCodeTarget):&amp;nbsp;&lt;br&gt;1. 调用build(): 把组件都到parseHandlersByName里, 塞入和创建一个ReflectiveFeign.&amp;nbsp;&lt;br&gt;2. reflectiveFeign.newInstance(hardcodeTarget), 创建代理" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="1340" y="1489" width="389.5" height="67" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-86" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-91" target="aYNqQ8mElyGrv2AiK-6F-83">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-87" value="继承" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-86">
          <mxGeometry x="-0.3949" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-88" value="target(hardCodeTarget):&amp;nbsp;&lt;br&gt;1. 调用build(): 创建一个ReflectiveFeign&lt;br&gt;2. reflectiveFeign.newInstance(hardcodeTarget), 创建代理" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="1372" y="1699" width="320" height="80" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-89" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-91" target="aYNqQ8mElyGrv2AiK-6F-112">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-90" value="内部工具类" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-89">
          <mxGeometry x="-0.4271" y="8" relative="1" as="geometry">
            <mxPoint x="21.86" y="9.71" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-91" value="ReflectiveFeign: 反射feign" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" vertex="1" parent="1">
          <mxGeometry x="1695" y="1589" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-92" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;dashed=1;strokeColor=#ffcd5a;endArrow=none;endFill=0;fillColor=#fff9e7;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-91" target="aYNqQ8mElyGrv2AiK-6F-88">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1771.8965517241381" y="1459" as="sourcePoint" />
            <mxPoint x="1561.5517241379312" y="1499" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-93" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;startArrow=none;fontSize=12;strokeColor=#FFCCCC;exitPerimeter=0;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-110" target="aYNqQ8mElyGrv2AiK-6F-99">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1532" y="1869.1999999999998" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-94" value="拿到动态代理的bean" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-93">
          <mxGeometry x="-0.2933" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-95" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;endArrow=none;endFill=0;dashed=1;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-99" target="aYNqQ8mElyGrv2AiK-6F-102">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-96" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-99" target="aYNqQ8mElyGrv2AiK-6F-144">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-97" value="请求来了" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-96">
          <mxGeometry x="-0.3071" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-98" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;endArrow=none;endFill=0;dashed=1;" edge="1" parent="1" target="aYNqQ8mElyGrv2AiK-6F-103">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1507.836666666667" y="2158" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-99" value="proxy: 代理serviceAPI" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffecf1;align=center;strokeColor=#ff8987;" vertex="1" parent="1">
          <mxGeometry x="1433.67" y="2110" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-100" value="" style="endArrow=classic;html=1;fontSize=12;strokeColor=#FFCCCC;strokeWidth=4;edgeStyle=elbowEdgeStyle;" edge="1" parent="1" target="aYNqQ8mElyGrv2AiK-6F-99">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1072.67" y="2140" as="sourcePoint" />
            <mxPoint x="1145.67" y="2304" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-101" value="请求进来" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-100">
          <mxGeometry x="-0.4222" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-102" value="feignInocationHandler" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="1541.75" y="2223" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-103" value="hardCodeTarget: &lt;br&gt;接口类型, serviceName, 未解析的url" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="1367.75" y="2222" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-104" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;strokeColor=#FFCCCC;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-88" target="aYNqQ8mElyGrv2AiK-6F-110">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1925.3328571428574" y="1797" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-105" value="2. 大概内容是" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-104">
          <mxGeometry x="-0.2895" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-106" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-110" target="aYNqQ8mElyGrv2AiK-6F-117">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1830.0033333333336" y="1783.3333333333335" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-107" value="1. 解析target" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-106">
          <mxGeometry x="-0.587" relative="1" as="geometry">
            <mxPoint x="30.29" y="0.71" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-108" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-110" target="aYNqQ8mElyGrv2AiK-6F-139">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-109" value="2. 包装invocationHandler" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-108">
          <mxGeometry x="0.0543" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-110" value="0. 构造函数就把feign组件都包装在ParseHandlerByName了&lt;br&gt;1. 用ParseHandlerByName为API接口每个方法parse一遍, 生成nameToHandler&amp;lt;接口+方法, SynchronousMethodHandler&amp;gt;&lt;br&gt;&lt;font color=&quot;#ff6666&quot;&gt;2. 把hardCodedTarget和nameToHandler包装成FeignInvocationHandler&lt;br&gt;&lt;b&gt;3. 根据&lt;/b&gt;InvocationHandler和target(接口)&lt;b&gt;创建proxy: hardCodedTarget的type+methodToHandler&lt;/b&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="1350.4" y="1863" width="363.19" height="98" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-111" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;endArrow=none;endFill=0;dashed=1;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-112" target="aYNqQ8mElyGrv2AiK-6F-117">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-112" value="&lt;b&gt;ParseHandlerByName&lt;/b&gt;: 包装feign所有组件, 解析出每个method的Handler" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" vertex="1" parent="1">
          <mxGeometry x="1924.67" y="1735" width="209" height="42" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-113" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-117" target="aYNqQ8mElyGrv2AiK-6F-123">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-114" value="1. 把API所有methodData解析出来" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-113">
          <mxGeometry x="-0.6706" relative="1" as="geometry">
            <mxPoint x="71" y="2" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-115" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-117" target="aYNqQ8mElyGrv2AiK-6F-129">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-116" value="2. 为每个method包装SynchronousMethodHandler" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-115">
          <mxGeometry x="-0.7403" y="1" relative="1" as="geometry">
            <mxPoint x="151" y="82" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-117" value="apply(target): &lt;br&gt;- 解析target 这个API接口, 拿到每个method的methodHandler&lt;br&gt;1. 使用contract解析API的所有method信息, 拿到methodMetadata&lt;br&gt;2. 解析所有methodMetadata, 包装出每个方法的SynchronousMethodHandler, 搞到map里" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="1847.5700000000002" y="1839" width="363.19" height="98" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-118" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-119" target="aYNqQ8mElyGrv2AiK-6F-121">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-119" value="&lt;b&gt;SpringMvcContract: &lt;/b&gt;client配置进来的解析类" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" vertex="1" parent="1">
          <mxGeometry x="2512" y="1718" width="139" height="42" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-120" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.805;entryY=-0.013;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;fontSize=12;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#fff9e7;strokeColor=#ffcd5a;dashed=1;endArrow=none;endFill=0;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-121" target="aYNqQ8mElyGrv2AiK-6F-123">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-121" value="&lt;b&gt;Contract&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="2512" y="1649" width="139" height="42" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-122" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-123" target="aYNqQ8mElyGrv2AiK-6F-126">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-123" value="parseAndValidateMetadata(target.type(接口class)):&amp;nbsp;&lt;br&gt;- 解析服务接口的class&lt;br&gt;&lt;b&gt;&lt;font color=&quot;#00ff00&quot;&gt;1. 把接口的每个方法的解析一个遍, 类/方法参数的注解内容, 包装各种元数据和对应的processor成 MethodMetadata&lt;br&gt;&lt;/font&gt;&lt;/b&gt;2. 每个方法一个methodMetadata, 然后搞一个list&amp;lt;methodMetadata&amp;gt;返" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="2452" y="1817" width="384.1" height="98" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-124" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;endArrow=none;endFill=0;dashed=1;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-119" target="aYNqQ8mElyGrv2AiK-6F-123">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2149.1428571428573" y="1755" as="sourcePoint" />
            <mxPoint x="2149.1428571428573" y="1817" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-125" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;startArrow=none;fontSize=12;dashed=1;fillColor=#fff9e7;strokeColor=#ffcd5a;endArrow=none;endFill=0;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-126" target="aYNqQ8mElyGrv2AiK-6F-137">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-126" value="&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;MethodMetadata: &lt;/b&gt;API方法的全部信息&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" vertex="1" parent="1">
          <mxGeometry x="2574.55" y="1937" width="139" height="42" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-127" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.524;entryY=0.003;entryDx=0;entryDy=0;entryPerimeter=0;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;dashed=1;endArrow=none;endFill=0;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-129" target="aYNqQ8mElyGrv2AiK-6F-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-128" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;exitX=0;exitY=0.5;exitDx=0;exitDy=0;fillColor=#fff9e7;strokeColor=#ffcd5a;dashed=1;endArrow=none;endFill=0;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-129" target="aYNqQ8mElyGrv2AiK-6F-149">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2251" y="2020" />
              <mxPoint x="2251" y="2231" />
              <mxPoint x="2280" y="2231" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-129" value="&lt;b&gt;SynchronousMethodHandler: &lt;/b&gt;同步的methodHandler" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" vertex="1" parent="1">
          <mxGeometry x="2297.1000000000004" y="1999" width="226.45" height="42" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-130" value="target:&amp;nbsp;&lt;br&gt;HardCodedTarget" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="2299" y="2051" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-131" value="methodMedadata" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="2299" y="2101" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-132" value="client:&amp;nbsp;&lt;br&gt;LoadBalancerFeignClient" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="2284" y="2141" width="140" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-133" value="retryer" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="2437" y="2111" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-134" value="logger" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="2437" y="2141" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-135" value="encoder" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="2437" y="2081" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-136" value="decoder" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="2434" y="2051" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-137" value="&lt;font color=&quot;#ff0000&quot;&gt;template&lt;/font&gt;:&lt;br&gt;RequestTemplate: url的路径,方法什么的" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="2574.55" y="1995" width="138.45" height="36" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-138" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;dashed=1;endArrow=none;endFill=0;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-139" target="aYNqQ8mElyGrv2AiK-6F-144">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-139" value="&lt;b&gt;FeignInvocationHandler:&amp;nbsp;&lt;br&gt;&lt;br&gt;&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" vertex="1" parent="1">
          <mxGeometry x="1830.1" y="2008" width="209" height="42" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-140" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-91" target="aYNqQ8mElyGrv2AiK-6F-139">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1855.1428571428573" y="1659" as="sourcePoint" />
            <mxPoint x="2039.1428571428573" y="1745" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1795" y="1951" />
              <mxPoint x="1952" y="1951" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-141" value="内部工具类" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-140">
          <mxGeometry x="-0.4271" y="8" relative="1" as="geometry">
            <mxPoint x="-7.859999999999999" y="-101.71000000000001" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-142" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-144" target="aYNqQ8mElyGrv2AiK-6F-149">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-143" value="执行被代理的API" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-142">
          <mxGeometry x="-0.0889" y="-2" relative="1" as="geometry">
            <mxPoint x="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-144" value="invoke(proxy, method, args[]): 执行代理方法&lt;br&gt;1. 拦截住默认的hashCode(), toString(), equals()方法, 转到hardcoded&lt;br&gt;2. 从map里面拿到method的methodHandler, 调用invoke()" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="1753.0000000000002" y="2131" width="363.19" height="98" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-145" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;strokeColor=#FFCCCC;strokeWidth=3;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-149" target="aYNqQ8mElyGrv2AiK-6F-154">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-146" value="1. 解析参数成Template" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-145">
          <mxGeometry x="-0.1332" y="-1" relative="1" as="geometry">
            <mxPoint x="3.139999999999999" y="-4" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-147" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-149" target="aYNqQ8mElyGrv2AiK-6F-159">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-148" value="&lt;b&gt;2. 执行requestTemplate&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-147">
          <mxGeometry x="-0.1739" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-149" value="invoke(args)&lt;br&gt;1. 使用requestTemplate翻译args到一个requestTemplate&lt;br&gt;&lt;b&gt;2. 执行requestTemplate&lt;/b&gt;&lt;br&gt;&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;3. catch 执行的异常, 然后用retryer重试机制来处理异常&lt;/font&gt;&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="2054" y="2283" width="363.19" height="98" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-150" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;endArrow=none;endFill=0;dashed=1;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-151" target="aYNqQ8mElyGrv2AiK-6F-152">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-151" value="&lt;b&gt;RestTemplate:&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" vertex="1" parent="1">
          <mxGeometry x="2755.0000000000005" y="2181" width="226.45" height="42" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-152" value="resolve()&lt;br&gt;1. 解析url, 把args的value都拼到url里&lt;br&gt;2. 拼接header, 拼接body" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="2913" y="2339" width="218" height="69" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-153" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-154" target="aYNqQ8mElyGrv2AiK-6F-152">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-154" value="create(argv): 把参数创建一个requestTemplate&lt;br&gt;&lt;br&gt;1. 复制拿到自己之前存的MethodMetadata找到requestTemplate&lt;br&gt;2. 使用一个varBuilder把args和接口param都对应起来成map&lt;br&gt;3. 调用resolve把&amp;lt;args, param&amp;gt;解析成requestTemplate, 返回" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="2542" y="2324" width="344" height="98" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-155" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-156" target="aYNqQ8mElyGrv2AiK-6F-151">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-156" value="原型模式, 异变对象调用clone复制一个新的" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#ff8987;align=center;strokeColor=#ff8987;" vertex="1" parent="1">
          <mxGeometry x="2804.73" y="2091" width="127" height="50" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-157" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;exitX=0.5;exitY=1;exitDx=0;exitDy=0;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-159" target="aYNqQ8mElyGrv2AiK-6F-166">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-158" value="1. 发送request" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-157">
          <mxGeometry x="-0.8889" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-159" value="executeAndDecode(): 执行, 反序列化response&lt;br&gt;&lt;font color=&quot;#007fff&quot;&gt;1. 调用LoadBalancerFeignClient执行调用&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;2. 如果设置了decoder就反序列化返回对应obj&lt;/b&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="2105.1" y="2431" width="261" height="63" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-160" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;dashed=1;fillColor=#fff9e7;strokeColor=#ffcd5a;endArrow=none;endFill=0;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-161" target="aYNqQ8mElyGrv2AiK-6F-166">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-161" value="&lt;b&gt;LoadBalancerFeignClient&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" vertex="1" parent="1">
          <mxGeometry x="2418.2700000000004" y="2544" width="226.45" height="42" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-162" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-166" target="aYNqQ8mElyGrv2AiK-6F-178">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-163" value="4. 发送request" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-162">
          <mxGeometry x="-0.4979" y="-23" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-164" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;startArrow=none;fontSize=12;strokeColor=#FFCCCC;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-166" target="aYNqQ8mElyGrv2AiK-6F-185">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-165" value="3. 拿到feignLoadbalancer" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-164">
          <mxGeometry x="0.205" relative="1" as="geometry">
            <mxPoint x="18.62" y="-2.28" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-166" value="execute(request, options):&lt;br&gt;1. 把request包装成RibbonRequest&lt;br&gt;2. &lt;b&gt;&lt;font color=&quot;#ffcccc&quot;&gt;从ribbon的clientFactory里面拿到&lt;/font&gt;&lt;/b&gt;要调用的serverName的spring, 再拿到&lt;b&gt;clientConfig&lt;/b&gt;&lt;br&gt;3. 从spring再拿&lt;b&gt;feignLoadBalancer&lt;/b&gt;, &lt;br&gt;4. 然后调用发送request" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="2401" y="2617" width="261" height="93" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-167" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-168" target="aYNqQ8mElyGrv2AiK-6F-170">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-168" value="&lt;b&gt;FeignLoadBalancer: 拿着loadBalancer&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" vertex="1" parent="1">
          <mxGeometry x="2871.0000000000005" y="2594" width="226.45" height="42" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-169" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-170" target="aYNqQ8mElyGrv2AiK-6F-171">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-170" value="&lt;b&gt;AbstractLoadBalancerAwareClient:&lt;br&gt;和ILoadBalancer集成的&lt;br&gt;&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="2871.0000000000005" y="2535" width="226.45" height="42" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-171" value="&lt;b&gt;LoadBalancerContext&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;dashed=1;dashPattern=1 1;" vertex="1" parent="1">
          <mxGeometry x="2871.0000000000005" y="2473" width="226.45" height="42" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-172" value="loadBalancer:&lt;br&gt;ZoneAwareLoadBalancer" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="2858" y="2979" width="95" height="30" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-173" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.25;entryDx=0;entryDy=0;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-178" target="aYNqQ8mElyGrv2AiK-6F-219">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-174" value="2. 拿到server" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-173">
          <mxGeometry x="-0.5717" y="-10" relative="1" as="geometry">
            <mxPoint x="10" y="10" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-175" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;exitX=0.75;exitY=1;exitDx=0;exitDy=0;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-178" target="aYNqQ8mElyGrv2AiK-6F-228">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="3618" y="2893" as="targetPoint" />
            <mxPoint x="3084" y="2828" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="3063" y="2845" />
              <mxPoint x="3682" y="2845" />
              <mxPoint x="3682" y="2913" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-176" value="给server发送请求" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-175">
          <mxGeometry x="0.7211" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-177" value="3. 发送请求" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-175">
          <mxGeometry x="-0.9176" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-178" value="executeWithLoadBalancer(ribbonRequest, IClientConfig)&lt;br&gt;1. 把request和IclientConfig创建requestHandler, 然后包装 loadBalancerCommand&lt;br&gt;2. submit一个function&lt;br&gt;&lt;b&gt;&lt;font color=&quot;#ffcccc&quot;&gt;3. func接收Server, 然后把server的地址拼到request里, client发送request.&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#ff0000&quot;&gt;4. 拿到response, 包装成RibbonResponse&lt;/font&gt;&lt;br&gt;&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="2826.34" y="2684" width="315.77" height="116" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-179" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;dashed=1;fillColor=#fff9e7;strokeColor=#ffcd5a;endArrow=none;endFill=0;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-168" target="aYNqQ8mElyGrv2AiK-6F-178">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2994.0344827586205" y="2645.9999999999995" as="sourcePoint" />
            <mxPoint x="3052.5" y="2678" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-180" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-182" target="aYNqQ8mElyGrv2AiK-6F-168">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-181" value="引入配置" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-180">
          <mxGeometry x="0.1547" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-182" value="DefaultFeignLoadBalancedConfig" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#eaf3ff;align=center;strokeColor=#8db9ff;" vertex="1" parent="1">
          <mxGeometry x="3181" y="2594" width="213" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-183" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;endArrow=none;endFill=0;dashed=1;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-184" target="aYNqQ8mElyGrv2AiK-6F-185">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-184" value="&lt;b&gt;CachingSpringLoadBalancerFactory: &lt;/b&gt;&lt;br&gt;创建缓存FeignLoadBalancer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" vertex="1" parent="1">
          <mxGeometry x="2610.0200000000004" y="2973" width="226.45" height="42" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-185" value="create(clientName(就是eureka的serverName)) 创建FeignLoadBalancer&lt;br&gt;1. 检查缓存, 没有创建&lt;br&gt;&lt;font color=&quot;#ffcccc&quot;&gt;&lt;font style=&quot;font-weight: bold&quot;&gt;2. 从ribbon的spring里面拿到ILcientConfig, ILoadBalacner&lt;/font&gt;&lt;br&gt;&lt;/font&gt;&lt;font color=&quot;#528bff&quot;&gt;3. 把cleintConfig和ILoadbalancer创建成一个FeignLoadBalancer, 存起来, 返回&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="2554" y="3038" width="338.5" height="93" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-186" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;dashed=1;fillColor=#fff9e7;strokeColor=#ffcd5a;endArrow=none;endFill=0;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-182" target="aYNqQ8mElyGrv2AiK-6F-187">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2964.1428571428573" y="2617" as="sourcePoint" />
            <mxPoint x="3334.5" y="2625" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-187" value="client: LoadBalancerFeignClient" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="3207.5" y="2644" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-188" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-190" target="aYNqQ8mElyGrv2AiK-6F-172">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-189" value="注入" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-188">
          <mxGeometry x="0.1152" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-190" value="springClientFactory:&amp;nbsp;&lt;br&gt;ribbon+eureka的springcontext" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" vertex="1" parent="1">
          <mxGeometry x="3007.75" y="2979" width="177" height="33" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-191" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-194" target="aYNqQ8mElyGrv2AiK-6F-190">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-192" value="ribbon来了" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-191">
          <mxGeometry x="0.1708" relative="1" as="geometry">
            <mxPoint x="11.38" y="0.19" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-193" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-194" target="aYNqQ8mElyGrv2AiK-6F-213">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-194" value="RibbonAutoConfiguration: &lt;br&gt;ribbon-cloud的配置" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#eaf3ff;align=center;strokeColor=#FFCCCC;" vertex="1" parent="1">
          <mxGeometry x="3262" y="2979" width="170" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-195" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-196" target="aYNqQ8mElyGrv2AiK-6F-190">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-196" value="这个factory使&lt;span style=&quot;text-align: center&quot;&gt;RibbonClientConfiguration注册ILoadbalancer那一套, ribbon-cloud就来了.&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;strokeColor=#FFCCCC;" vertex="1" parent="1">
          <mxGeometry x="2984" y="3036" width="224.5" height="42" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-197" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;dashed=1;fillColor=#fff9e7;strokeColor=#ffcd5a;endArrow=none;endFill=0;elbow=vertical;" edge="1" parent="1" target="aYNqQ8mElyGrv2AiK-6F-172">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2836" y="2989" as="sourcePoint" />
            <mxPoint x="2866.5" y="2865" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-198" value="" style="group" vertex="1" connectable="0" parent="1">
          <mxGeometry x="2871" y="3127" width="960" height="329" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-199" value="ZoneAwareLoadBalancer: 对父类增强区域(机房)功能, 暂时不用看" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff9e7;strokeColor=#ffcd5a;" vertex="1" parent="aYNqQ8mElyGrv2AiK-6F-198">
          <mxGeometry x="90" y="44" width="200" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-200" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;startArrow=none;fontSize=12;fillColor=#fff9e7;strokeColor=#ffcd5a;dashed=1;endArrow=none;endFill=0;" edge="1" parent="aYNqQ8mElyGrv2AiK-6F-198" source="aYNqQ8mElyGrv2AiK-6F-199" target="aYNqQ8mElyGrv2AiK-6F-212">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="266" y="24" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-201" value="构造器: &lt;br&gt;1. 存起来rule, clientConfig,IPing, serverList, filter, serverListUpdater...&lt;br&gt;&amp;nbsp;2. 调用restOfInit(clientConfig): 初始化serverList&lt;br&gt;&lt;br&gt;restOfInit()&lt;br&gt;1. 在serverListUpdater上注册updateListOfServers()动作.&amp;nbsp;&lt;br&gt;2. 直接调用一次&lt;b&gt;&lt;font color=&quot;#00ff00&quot;&gt;updateListOfServers():&amp;nbsp;&lt;/font&gt;&lt;/b&gt;&lt;font color=&quot;#00ff00&quot;&gt;&lt;b&gt;使用serverList拿到所有的server, 存起来&lt;/b&gt;&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="aYNqQ8mElyGrv2AiK-6F-198">
          <mxGeometry x="24.5" y="122" width="331" height="138" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-202" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;startArrow=none;fontSize=12;endArrow=none;endFill=0;dashed=1;fillColor=#fff9e7;strokeColor=#ffcd5a;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="aYNqQ8mElyGrv2AiK-6F-198" source="aYNqQ8mElyGrv2AiK-6F-199" target="aYNqQ8mElyGrv2AiK-6F-201">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="216" y="24" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-203" value="DomainExtractingServerList: 对serverList的包装" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff9e7;strokeColor=#ffcd5a;" vertex="1" parent="aYNqQ8mElyGrv2AiK-6F-198">
          <mxGeometry x="510" y="143.00000000000045" width="274" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-204" style="edgeStyle=elbowEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1.006;exitY=0.832;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;strokeColor=#FFCCCC;exitPerimeter=0;" edge="1" parent="aYNqQ8mElyGrv2AiK-6F-198" source="aYNqQ8mElyGrv2AiK-6F-201" target="aYNqQ8mElyGrv2AiK-6F-203">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-205" value="2. 拿到serverList的所有server" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-204">
          <mxGeometry x="-0.7712" relative="1" as="geometry">
            <mxPoint x="34.33" y="4.169999999999995" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-206" value="getInitialListOfServers()&amp;nbsp;&lt;br&gt;getUpdatedOfServices()&amp;nbsp;&lt;br&gt;- 两个方法都是serverLIst的最本质方法, 都是单纯调用&lt;br&gt;&lt;br&gt;obtainServersViaDiscovery():&amp;nbsp;&lt;br&gt;1. 使用eurekaClient从vipAddress那里拿instanceInfo&lt;br&gt;2. 对instantInfo做一点处理, 无所谓" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="aYNqQ8mElyGrv2AiK-6F-198">
          <mxGeometry x="608" y="194" width="331" height="120" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-207" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="aYNqQ8mElyGrv2AiK-6F-198" source="aYNqQ8mElyGrv2AiK-6F-203" target="aYNqQ8mElyGrv2AiK-6F-206">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-208" value="直接调用" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-207">
          <mxGeometry x="-0.7477" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-209" value="PollingServerListUpdater: 弄个schedule线程池: 默认30s执行一次action: 也就是update" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff9e7;strokeColor=#ffcd5a;" vertex="1" parent="aYNqQ8mElyGrv2AiK-6F-198">
          <mxGeometry x="510" y="82" width="274" height="40" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-210" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;startArrow=none;fontSize=12;fillColor=#ffecf1;strokeColor=#FFCCCC;" edge="1" parent="aYNqQ8mElyGrv2AiK-6F-198" source="aYNqQ8mElyGrv2AiK-6F-201" target="aYNqQ8mElyGrv2AiK-6F-209">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-211" value="1. updater负责更新" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-210">
          <mxGeometry x="-0.7022" y="1" relative="1" as="geometry">
            <mxPoint x="38.5" y="-3" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-212" value="allServers: 存起来eureak的服务" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=none;strokeColor=#8db9ff;dashed=1;" vertex="1" parent="aYNqQ8mElyGrv2AiK-6F-198">
          <mxGeometry x="296" y="84" width="117" height="41" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-213" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=center;dashed=1;strokeColor=#FFCCCC;" vertex="1" parent="aYNqQ8mElyGrv2AiK-6F-198">
          <mxGeometry width="960" height="329" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-214" value="&lt;b&gt;&lt;font color=&quot;#ffcccc&quot;&gt;Ribbon的zoneAwareLoadbalancer和eureka结合, 保证最新eureka的注册server信息&lt;/font&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="aYNqQ8mElyGrv2AiK-6F-198">
          <mxGeometry x="318" width="295" height="49" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-215" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;dashed=1;fillColor=#fff9e7;strokeColor=#ffcd5a;endArrow=none;endFill=0;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-216" target="aYNqQ8mElyGrv2AiK-6F-219">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-216" value="&lt;b&gt;LoadBalancerCommand&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" vertex="1" parent="1">
          <mxGeometry x="3215" y="2707" width="179.5" height="29" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-217" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;strokeColor=#FFCCCC;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-219" target="aYNqQ8mElyGrv2AiK-6F-222">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-218" value="拿到server" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-217">
          <mxGeometry x="0.1358" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-219" value="submit()&lt;br&gt;&lt;b&gt;1. 从selectServer()里拿到server&lt;br&gt;2. 执行func&lt;br&gt;&lt;font color=&quot;#ff0000&quot;&gt;3. 调用的重试和超时机制&lt;/font&gt;&lt;br&gt;&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="3206.25" y="2780" width="197" height="54" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-220" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;strokeColor=#FFCCCC;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-222" target="aYNqQ8mElyGrv2AiK-6F-172">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-221" value="拿到目标server" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-220">
          <mxGeometry x="-0.5139" y="-22" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-222" value="getServerFromLoadBalancer" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="2865.23" y="2868" width="238" height="32" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-223" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;dashed=1;fillColor=#fff9e7;strokeColor=#ffcd5a;endArrow=none;endFill=0;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-178" target="aYNqQ8mElyGrv2AiK-6F-222">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2994.2250000000004" y="2646" as="sourcePoint" />
            <mxPoint x="2994.2250000000004" y="2694" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-224" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.25;entryDx=0;entryDy=0;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-225" target="aYNqQ8mElyGrv2AiK-6F-231">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-225" value="EurekaClient1- serverA" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="3724" y="2854" width="197" height="33" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-226" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-228" target="aYNqQ8mElyGrv2AiK-6F-231">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-227" value="注册" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-226">
          <mxGeometry x="-0.2966" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-228" value="EurekaClient2- serverB" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="3724" y="2895" width="197" height="34" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-229" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-230" target="aYNqQ8mElyGrv2AiK-6F-231">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-230" value="EurekaClient3- serverC" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="3724" y="2939" width="197" height="34" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-231" value="Eureka-Server" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="4035" y="2895" width="113" height="34" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-232" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-213" target="aYNqQ8mElyGrv2AiK-6F-231">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-233" value="拿eureka的serverList" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-232">
          <mxGeometry x="-0.7692" y="4" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-234" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;startArrow=none;fontSize=12;strokeColor=#FF0000;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-235" target="aYNqQ8mElyGrv2AiK-6F-149">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-235" value="自定义retryBean工作" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFCCCC;align=left;strokeColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="1865" y="2389" width="133" height="42" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-236" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.75;entryDx=0;entryDy=0;startArrow=none;fontSize=12;strokeColor=#FF0000;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-237" target="aYNqQ8mElyGrv2AiK-6F-219">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-237" value="会根据配置的feign重试次数和超时时间在一台机器上重试, 然后换机器重试." style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFCCCC;align=left;strokeColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="3443" y="2771" width="133" height="59" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-238" value="@EnableCircuitBreaker&lt;br&gt;HystrixCircuitBreakerConfiguration: &lt;b&gt;Hystrix启动配置&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#FF0000;" vertex="1" parent="1">
          <mxGeometry x="20" y="729" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-239" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;1. 注解入口&lt;/font&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="75" y="708.93" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-240" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-241" target="aYNqQ8mElyGrv2AiK-6F-246">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-241" value="HystrixFeign.Builder: 把hystrix增强到Feign里" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" vertex="1" parent="1">
          <mxGeometry x="680" y="1680" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-242" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;strokeColor=#FF0000;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-246" target="aYNqQ8mElyGrv2AiK-6F-85">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1310" y="1680" as="targetPoint" />
            <Array as="points">
              <mxPoint x="780" y="1870" />
              <mxPoint x="1290" y="1870" />
              <mxPoint x="1290" y="1539" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-243" value="&lt;b&gt;hystrix增强完了, 调用父类的build和newInstance, &lt;br&gt;相当于调用feign.Builder.target方法&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-242">
          <mxGeometry x="-0.7667" relative="1" as="geometry">
            <mxPoint x="221.1" y="-4" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-244" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;strokeColor=#FF0000;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-246" target="aYNqQ8mElyGrv2AiK-6F-249">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-245" value="增强内容之二就是创建InvocationHandler的工厂" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-244">
          <mxGeometry x="0.2101" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-246" value="target(Targeter, fallback)&lt;br&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;- 其实是往Feign.Builder里面塞了两个东西&lt;br&gt;1. 一个contract: HystrixDelicatingContract&lt;br&gt;2. 一个匿名的HystrixInvocationHandler工厂, 给创建&lt;/b&gt;&lt;b&gt;nvocationHandler的&lt;/b&gt;&lt;/font&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="609.25" y="1770" width="341.5" height="83" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-247" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;startArrow=none;fontSize=12;strokeColor=#FF0000;" edge="1" parent="1" source="aYNqQ8mElyGrv2AiK-6F-249" target="aYNqQ8mElyGrv2AiK-6F-250">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-248" value="&lt;font color=&quot;#ff0000&quot;&gt;未来要替换&lt;/font&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;childText;" vertex="1" connectable="0" parent="aYNqQ8mElyGrv2AiK-6F-247">
          <mxGeometry x="-0.1628" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-249" value="HystrixInvocationHandler" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" vertex="1" parent="1">
          <mxGeometry x="679.99" y="1911.5" width="200" height="28.5" as="geometry" />
        </mxCell>
        <mxCell id="aYNqQ8mElyGrv2AiK-6F-250" value="InvocationHandler" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" vertex="1" parent="1">
          <mxGeometry x="959.99" y="1911.5" width="200" height="28.5" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
