<mxfile host="" modified="2021-02-28T08:11:07.559Z" agent="5.0 (Windows NT 6.2; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/84.0.4147.105 Safari/537.36" etag="b7jAEuSBRH_cqltXJgmt" version="13.7.9" type="embed" pages="2"><diagram id="qE450QN089jsc8ACyiPe" name="137.spring-cloud-netflix-zuul包"><mxGraphModel dx="1300" dy="830" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="2v8JiLD0MzeBErtp1tqP-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="2v8JiLD0MzeBErtp1tqP-1" target="2v8JiLD0MzeBErtp1tqP-9" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="270" y="277.5000000000001" as="targetPoint"/></mxGeometry></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-7" value="引入" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="2v8JiLD0MzeBErtp1tqP-6" vertex="1" connectable="0"><mxGeometry x="-0.2333" relative="1" as="geometry"><mxPoint x="5.520000000000003" y="2.5" as="offset"/></mxGeometry></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-1" value="@EnableZuulProxy" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;fillColor=#99FF99;" parent="1" vertex="1"><mxGeometry x="30" y="247.5" width="120" height="60" as="geometry"/></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="2v8JiLD0MzeBErtp1tqP-9" target="2v8JiLD0MzeBErtp1tqP-10" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-8" value="&lt;b&gt;继承&lt;/b&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="2v8JiLD0MzeBErtp1tqP-5" vertex="1" connectable="0"><mxGeometry x="0.2" y="4" relative="1" as="geometry"><mxPoint x="4" as="offset"/></mxGeometry></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="2v8JiLD0MzeBErtp1tqP-9" target="2v8JiLD0MzeBErtp1tqP-15" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="2v8JiLD0MzeBErtp1tqP-9" target="2v8JiLD0MzeBErtp1tqP-23" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-9" value="ZuulProxyAutoConfiguration:&lt;br&gt;TODO: 增加xx配置" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;fillColor=#99FF99;" parent="1" vertex="1"><mxGeometry x="230" y="257.5" width="210" height="40" as="geometry"/></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="2v8JiLD0MzeBErtp1tqP-10" target="2v8JiLD0MzeBErtp1tqP-11" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;" parent="1" source="2v8JiLD0MzeBErtp1tqP-10" target="2v8JiLD0MzeBErtp1tqP-13" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;" parent="1" source="2v8JiLD0MzeBErtp1tqP-10" target="2v8JiLD0MzeBErtp1tqP-19" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;endArrow=block;endFill=1;strokeWidth=2;" parent="1" source="2v8JiLD0MzeBErtp1tqP-10" target="pU7h6Pv-z0UxT071-zeS-45" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-10" value="ZuulServerAutoConfiguration:&lt;br&gt;Zuul的基本配置" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;fillColor=#99FF99;" parent="1" vertex="1"><mxGeometry x="230" y="161.25" width="210" height="40" as="geometry"/></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-11" value="pre-filters" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;" parent="1" vertex="1"><mxGeometry x="520" y="132.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-13" value="post-filters" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;" parent="1" vertex="1"><mxGeometry x="520" y="182.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-15" value="DiscoveryClient+注册eureka" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;fillColor=#99FF99;" parent="1" vertex="1"><mxGeometry x="250" y="387.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-19" value="ZuulServlet: 初始化filter chain" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;" parent="1" vertex="1"><mxGeometry x="520" y="82.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-23" value="增加了一部分filter" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;fillColor=#99FF99;" parent="1" vertex="1"><mxGeometry x="380" y="329.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-25" value="post-filters" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;fillColor=#99FF99;" parent="1" vertex="1"><mxGeometry x="520" y="182.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-26" value="pre-filters" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;fillColor=#99FF99;" parent="1" vertex="1"><mxGeometry x="520" y="132.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="1" source="2v8JiLD0MzeBErtp1tqP-27" target="2v8JiLD0MzeBErtp1tqP-29" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-27" value="ZuulServlet: 初始化filter chain" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;fillColor=#99FF99;" parent="1" vertex="1"><mxGeometry x="520" y="82.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeWidth=2;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF0000;" parent="1" source="2v8JiLD0MzeBErtp1tqP-29" target="Ic3zBI-SBHuvdnSW6pKr-3" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-23" value="创建runner" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="pU7h6Pv-z0UxT071-zeS-22" vertex="1" connectable="0"><mxGeometry x="-0.745" y="2" relative="1" as="geometry"><mxPoint x="12.41" y="0.75" as="offset"/></mxGeometry></mxCell><mxCell id="2v8JiLD0MzeBErtp1tqP-29" value="init() &lt;br&gt;创建zuulRunner" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="1" vertex="1"><mxGeometry x="860" y="52.5" width="90" height="35" as="geometry"/></mxCell><mxCell id="Ic3zBI-SBHuvdnSW6pKr-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;endArrow=none;endFill=0;strokeColor=#FFD966;strokeWidth=2;" parent="1" source="Ic3zBI-SBHuvdnSW6pKr-1" target="Ic3zBI-SBHuvdnSW6pKr-3" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="Ic3zBI-SBHuvdnSW6pKr-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeWidth=2;" parent="1" source="Ic3zBI-SBHuvdnSW6pKr-2" target="Ic3zBI-SBHuvdnSW6pKr-5" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="Ic3zBI-SBHuvdnSW6pKr-7" value="继承" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="Ic3zBI-SBHuvdnSW6pKr-6" vertex="1" connectable="0"><mxGeometry x="0.1579" y="7" relative="1" as="geometry"><mxPoint x="6.99" y="0.33999999999999986" as="offset"/></mxGeometry></mxCell><mxCell id="Ic3zBI-SBHuvdnSW6pKr-2" value="&lt;b&gt;RequestContext: &lt;br&gt;&lt;/b&gt;1. threadLoacal存自己. &lt;br&gt;2. context内包含req和res, 可存各种filter需要的数据" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="1" vertex="1"><mxGeometry x="1370" y="117.5" width="195" height="50" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#FF0000;strokeWidth=2;" parent="1" source="Ic3zBI-SBHuvdnSW6pKr-3" target="Ic3zBI-SBHuvdnSW6pKr-2" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-25" value="创建&lt;br&gt;context" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="pU7h6Pv-z0UxT071-zeS-24" vertex="1" connectable="0"><mxGeometry x="-0.2308" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="Ic3zBI-SBHuvdnSW6pKr-3" value="init(httpSevletReq, resp)&lt;br&gt;1. 拿到currentThread的RequestContext&lt;br&gt;2. 把request放进context里, 把resp包装一下放进去" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="1" vertex="1"><mxGeometry x="1095" y="112.5" width="215" height="55" as="geometry"/></mxCell><mxCell id="Ic3zBI-SBHuvdnSW6pKr-5" value="&lt;b&gt;ConcurrentHashMap&amp;lt;str, obj&amp;gt;&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="1" vertex="1"><mxGeometry x="1370" y="45" width="195" height="40" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-1" value="zuulRunner" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" parent="1" vertex="1"><mxGeometry x="570" y="30" width="105" height="30" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="1" source="2v8JiLD0MzeBErtp1tqP-27" target="pU7h6Pv-z0UxT071-zeS-1" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="662" y="82.5" as="sourcePoint"/><mxPoint x="662" y="50" as="targetPoint"/></mxGeometry></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-5" value="service(req, res) &lt;br&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;- 接收到请求, 依次执行&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="1" vertex="1"><mxGeometry x="860" y="102.5" width="110" height="35" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="1" source="2v8JiLD0MzeBErtp1tqP-27" target="pU7h6Pv-z0UxT071-zeS-5" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="740" y="107.51724137931035" as="sourcePoint"/><mxPoint x="870" y="80" as="targetPoint"/></mxGeometry></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-8" value="preRoute()&lt;br&gt;" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="1" vertex="1"><mxGeometry x="877.5" y="167.5" width="75" height="27.5" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-9" value="route()" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="1" vertex="1"><mxGeometry x="887.5" y="220" width="55" height="37.5" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#d6b656;strokeWidth=2;dashed=1;fillColor=#fff2cc;" parent="1" source="pU7h6Pv-z0UxT071-zeS-10" target="pU7h6Pv-z0UxT071-zeS-20" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#FF0000;strokeWidth=2;" parent="1" source="Ic3zBI-SBHuvdnSW6pKr-1" target="pU7h6Pv-z0UxT071-zeS-35" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-10" value="postRoute()&lt;br&gt;- 异常时也调用" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="1" vertex="1"><mxGeometry x="870" y="280" width="90" height="37.5" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=block;endFill=1;" parent="1" source="pU7h6Pv-z0UxT071-zeS-5" target="pU7h6Pv-z0UxT071-zeS-8" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="740" y="107.51724137931035" as="sourcePoint"/><mxPoint x="870" y="130" as="targetPoint"/></mxGeometry></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=block;endFill=1;" parent="1" source="pU7h6Pv-z0UxT071-zeS-8" target="pU7h6Pv-z0UxT071-zeS-9" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="925" y="147.5" as="sourcePoint"/><mxPoint x="925" y="162.5" as="targetPoint"/></mxGeometry></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=block;endFill=1;" parent="1" source="pU7h6Pv-z0UxT071-zeS-9" target="pU7h6Pv-z0UxT071-zeS-10" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="915" y="220" as="sourcePoint"/><mxPoint x="935" y="172.5" as="targetPoint"/></mxGeometry></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-15" value="error(e) 异常处理" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="1" vertex="1"><mxGeometry x="950" y="220" width="100" height="37.5" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=block;endFill=1;" parent="1" source="pU7h6Pv-z0UxT071-zeS-8" target="pU7h6Pv-z0UxT071-zeS-15" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="925" y="147.5" as="sourcePoint"/><mxPoint x="925" y="177.5" as="targetPoint"/></mxGeometry></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-20" value="RequestContext.unset():&lt;br&gt;干掉threadLocal中的requestContext" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="1" vertex="1"><mxGeometry x="815" y="346.5" width="200" height="30" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-26" value="@EnableCircuitBreaker: hystrix相关" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;fillColor=#99FF99;" parent="1" vertex="1"><mxGeometry x="20" y="387.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="1" source="2v8JiLD0MzeBErtp1tqP-1" target="pU7h6Pv-z0UxT071-zeS-26" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="160" y="287.5" as="sourcePoint"/><mxPoint x="280" y="287.5" as="targetPoint"/></mxGeometry></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-29" value="引入" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="pU7h6Pv-z0UxT071-zeS-28" vertex="1" connectable="0"><mxGeometry x="-0.2333" relative="1" as="geometry"><mxPoint y="23.16" as="offset"/></mxGeometry></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-31" value="FilterProcessor:&amp;nbsp;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="1" vertex="1"><mxGeometry x="1325" y="220" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#FF0000;strokeWidth=2;" parent="1" source="pU7h6Pv-z0UxT071-zeS-35" target="pU7h6Pv-z0UxT071-zeS-34" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1345" y="320" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-41" value="拿到指定类型的filter list" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="pU7h6Pv-z0UxT071-zeS-40" vertex="1" connectable="0"><mxGeometry x="0.0361" y="-4" relative="1" as="geometry"><mxPoint x="-3" y="-4" as="offset"/></mxGeometry></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#FF0000;strokeWidth=2;" parent="1" source="pU7h6Pv-z0UxT071-zeS-34" target="pU7h6Pv-z0UxT071-zeS-37" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-34" value="FilterLoader: &lt;br&gt;加载pre filters" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="1" vertex="1"><mxGeometry x="1325" y="380" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-35" value="preRoute()&amp;nbsp;-&amp;gt; runfilters(&quot;pre&quot;)&lt;br&gt;route() -&amp;gt; runfilters(&quot;route&quot;);&lt;br&gt;postRoute()&amp;nbsp;-&amp;gt; runfilters(&quot;post&quot;)&lt;br&gt;error() -? runFilters(&quot;error&quot;);&lt;br&gt;都是: 拿到filter list, 依次执行" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="1" vertex="1"><mxGeometry x="1320" y="275" width="175" height="71.5" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="1" source="pU7h6Pv-z0UxT071-zeS-31" target="pU7h6Pv-z0UxT071-zeS-35" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1227.5" y="340" as="sourcePoint"/><mxPoint x="1237.5" y="310" as="targetPoint"/></mxGeometry></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-37" value="FilterRegistry: 包含所有的filter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="1" vertex="1"><mxGeometry x="1525" y="380" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="Ic3zBI-SBHuvdnSW6pKr-1" value="ZuulRunner: 空空调用" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="1" vertex="1"><mxGeometry x="1120" y="292" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#FF0000;strokeWidth=2;" parent="1" source="pU7h6Pv-z0UxT071-zeS-10" target="Ic3zBI-SBHuvdnSW6pKr-1" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="960" y="298.75862068965523" as="sourcePoint"/><mxPoint x="1320" y="310.7586206896551" as="targetPoint"/></mxGeometry></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-44" value="&lt;b&gt;生命周期方法&lt;br&gt;都是调用runner&lt;/b&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="pU7h6Pv-z0UxT071-zeS-43" vertex="1" connectable="0"><mxGeometry x="-0.4126" y="-2" relative="1" as="geometry"><mxPoint x="19.66" y="-2.01" as="offset"/></mxGeometry></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-45" value="&lt;b&gt;ZuulFilterConfiguration: &lt;br&gt;&lt;/b&gt;把所有的filter塞入FilterRegister里面" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;fillColor=#99FF99;" parent="1" vertex="1"><mxGeometry x="520" y="227.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#000000;strokeWidth=2;" parent="1" source="pU7h6Pv-z0UxT071-zeS-48" target="pU7h6Pv-z0UxT071-zeS-35" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="pU7h6Pv-z0UxT071-zeS-48" value="参数硬编码!" style="whiteSpace=wrap;html=1;rounded=1;shadow=0;glass=0;sketch=0;strokeColor=#b85450;fillColor=#f8cecc;" parent="1" vertex="1"><mxGeometry x="1530" y="295.75" width="90" height="30" as="geometry"/></mxCell></root></mxGraphModel></diagram><diagram name="138. filter chain" id="mo4Q-4kKYCmxwGndGO48"><mxGraphModel dx="1180" dy="498" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0"><root><mxCell id="0qLJ_IpiBYj3DrSgOpRF-0"/><mxCell id="0qLJ_IpiBYj3DrSgOpRF-1" parent="0qLJ_IpiBYj3DrSgOpRF-0"/><mxCell id="0qLJ_IpiBYj3DrSgOpRF-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-4" target="0qLJ_IpiBYj3DrSgOpRF-9" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="270" y="277.5000000000001" as="targetPoint"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-3" value="引入" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="0qLJ_IpiBYj3DrSgOpRF-2" vertex="1" connectable="0"><mxGeometry x="-0.2333" relative="1" as="geometry"><mxPoint x="5.520000000000003" y="2.5" as="offset"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-4" value="@EnableZuulProxy" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;fillColor=#99FF99;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="30" y="247.5" width="120" height="60" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-9" target="0qLJ_IpiBYj3DrSgOpRF-14" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-6" value="&lt;b&gt;继承&lt;/b&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="0qLJ_IpiBYj3DrSgOpRF-5" vertex="1" connectable="0"><mxGeometry x="0.2" y="4" relative="1" as="geometry"><mxPoint x="4" as="offset"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-9" target="0qLJ_IpiBYj3DrSgOpRF-17" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-9" target="0qLJ_IpiBYj3DrSgOpRF-19" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-9" value="ZuulProxyAutoConfiguration:&lt;br&gt;TODO: 增加xx配置" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;fillColor=#99FF99;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="230" y="257.5" width="210" height="40" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-14" target="0qLJ_IpiBYj3DrSgOpRF-15" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-14" target="0qLJ_IpiBYj3DrSgOpRF-16" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-14" target="0qLJ_IpiBYj3DrSgOpRF-18" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;endArrow=block;endFill=1;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-14" target="0qLJ_IpiBYj3DrSgOpRF-64" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-14" value="ZuulServerAutoConfiguration:&lt;br&gt;Zuul的基本配置" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;fillColor=#99FF99;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="230" y="161.25" width="210" height="40" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-15" value="pre-filters" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="520" y="132.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-16" value="post-filters" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="520" y="182.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-17" value="DiscoveryClient+注册eureka" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;fillColor=#99FF99;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="250" y="387.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-18" value="ZuulServlet: 初始化filter chain" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="520" y="82.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-19" value="增加了一部分filter" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;fillColor=#99FF99;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="380" y="329.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-20" value="post-filters" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;fillColor=#99FF99;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="520" y="182.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-21" value="pre-filters" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;fillColor=#99FF99;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="520" y="132.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-23" target="0qLJ_IpiBYj3DrSgOpRF-26" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-23" value="ZuulServlet: 初始化filter chain" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;fillColor=#99FF99;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="520" y="82.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeWidth=2;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF0000;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-26" target="0qLJ_IpiBYj3DrSgOpRF-33" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-25" value="创建runner" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="0qLJ_IpiBYj3DrSgOpRF-24" vertex="1" connectable="0"><mxGeometry x="-0.745" y="2" relative="1" as="geometry"><mxPoint x="12.41" y="0.75" as="offset"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-26" value="init() &lt;br&gt;创建zuulRunner" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="860" y="52.5" width="90" height="35" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;endArrow=none;endFill=0;strokeColor=#FFD966;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-61" target="0qLJ_IpiBYj3DrSgOpRF-33" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-30" target="0qLJ_IpiBYj3DrSgOpRF-34" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-29" value="继承" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="0qLJ_IpiBYj3DrSgOpRF-28" vertex="1" connectable="0"><mxGeometry x="0.1579" y="7" relative="1" as="geometry"><mxPoint x="6.99" y="0.33999999999999986" as="offset"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-30" value="&lt;b&gt;RequestContext: &lt;br&gt;&lt;/b&gt;1. threadLoacal存自己. &lt;br&gt;2. context内包含req和res, 可存各种filter需要的数据" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1370" y="117.5" width="195" height="50" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#FF0000;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-33" target="0qLJ_IpiBYj3DrSgOpRF-30" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-32" value="创建&lt;br&gt;context" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="0qLJ_IpiBYj3DrSgOpRF-31" vertex="1" connectable="0"><mxGeometry x="-0.2308" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-33" value="init(httpSevletReq, resp)&lt;br&gt;1. 拿到currentThread的RequestContext&lt;br&gt;2. 把request放进context里, 把resp包装一下放进去" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1095" y="112.5" width="215" height="55" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-34" value="&lt;b&gt;ConcurrentHashMap&amp;lt;str, obj&amp;gt;&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1370" y="45" width="195" height="40" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-35" value="zuulRunner" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="570" y="30" width="105" height="30" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-23" target="0qLJ_IpiBYj3DrSgOpRF-35" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="662" y="82.5" as="sourcePoint"/><mxPoint x="662" y="50" as="targetPoint"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-37" value="service(req, res) &lt;br&gt;&lt;font style=&quot;font-size: 10px&quot;&gt;- 接收到请求, 依次执行&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="860" y="102.5" width="110" height="35" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-23" target="0qLJ_IpiBYj3DrSgOpRF-37" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="740" y="107.51724137931035" as="sourcePoint"/><mxPoint x="870" y="80" as="targetPoint"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-39" value="preRoute()&lt;br&gt;" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="877.5" y="167.5" width="75" height="27.5" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-40" value="route()" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="887.5" y="220" width="55" height="37.5" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#d6b656;strokeWidth=2;dashed=1;fillColor=#fff2cc;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-43" target="0qLJ_IpiBYj3DrSgOpRF-49" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#FF0000;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-61" target="0qLJ_IpiBYj3DrSgOpRF-58" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-43" value="postRoute()&lt;br&gt;- 异常时也调用" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="870" y="280" width="90" height="37.5" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=block;endFill=1;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-37" target="0qLJ_IpiBYj3DrSgOpRF-39" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="740" y="107.51724137931035" as="sourcePoint"/><mxPoint x="870" y="130" as="targetPoint"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=block;endFill=1;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-39" target="0qLJ_IpiBYj3DrSgOpRF-40" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="925" y="147.5" as="sourcePoint"/><mxPoint x="925" y="162.5" as="targetPoint"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=block;endFill=1;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-40" target="0qLJ_IpiBYj3DrSgOpRF-43" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="915" y="220" as="sourcePoint"/><mxPoint x="935" y="172.5" as="targetPoint"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-47" value="error(e) 异常处理" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="950" y="220" width="100" height="37.5" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=block;endFill=1;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-39" target="0qLJ_IpiBYj3DrSgOpRF-47" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="925" y="147.5" as="sourcePoint"/><mxPoint x="925" y="177.5" as="targetPoint"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-49" value="RequestContext.unset():&lt;br&gt;干掉threadLocal中的requestContext" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="815" y="346.5" width="200" height="30" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-50" value="@EnableCircuitBreaker: hystrix相关" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;fillColor=#99FF99;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="20" y="387.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-51" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-4" target="0qLJ_IpiBYj3DrSgOpRF-50" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="160" y="287.5" as="sourcePoint"/><mxPoint x="280" y="287.5" as="targetPoint"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-52" value="引入" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="0qLJ_IpiBYj3DrSgOpRF-51" vertex="1" connectable="0"><mxGeometry x="-0.2333" relative="1" as="geometry"><mxPoint y="23.16" as="offset"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-53" value="FilterProcessor:&amp;nbsp;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1325" y="220" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#FF0000;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-58" target="0qLJ_IpiBYj3DrSgOpRF-57" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1345" y="320" as="sourcePoint"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-55" value="拿到指定类型的filter list" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="0qLJ_IpiBYj3DrSgOpRF-54" vertex="1" connectable="0"><mxGeometry x="0.0361" y="-4" relative="1" as="geometry"><mxPoint x="-3" y="-4" as="offset"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#FF0000;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-57" target="0qLJ_IpiBYj3DrSgOpRF-60" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-57" value="FilterLoader: &lt;br&gt;加载pre filters" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1325" y="380" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-58" value="preRoute()&amp;nbsp;-&amp;gt; runfilters(&quot;pre&quot;)&lt;br&gt;route() -&amp;gt; runfilters(&quot;route&quot;);&lt;br&gt;postRoute()&amp;nbsp;-&amp;gt; runfilters(&quot;post&quot;)&lt;br&gt;error() -? runFilters(&quot;error&quot;);&lt;br&gt;都是: 拿到filter list, 依次执行" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1320" y="275" width="175" height="71.5" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-59" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-53" target="0qLJ_IpiBYj3DrSgOpRF-58" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1227.5" y="340" as="sourcePoint"/><mxPoint x="1237.5" y="310" as="targetPoint"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-60" value="FilterRegistry: 包含所有的filter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1525" y="380" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-61" value="ZuulRunner: 空空调用" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1120" y="292" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#FF0000;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-43" target="0qLJ_IpiBYj3DrSgOpRF-61" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="960" y="298.75862068965523" as="sourcePoint"/><mxPoint x="1320" y="310.7586206896551" as="targetPoint"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-63" value="&lt;b&gt;生命周期方法&lt;br&gt;都是调用runner&lt;/b&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="0qLJ_IpiBYj3DrSgOpRF-62" vertex="1" connectable="0"><mxGeometry x="-0.4126" y="-2" relative="1" as="geometry"><mxPoint x="19.66" y="-2.01" as="offset"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-64" value="&lt;b&gt;ZuulFilterConfiguration: &lt;br&gt;&lt;/b&gt;把所有的filter塞入FilterRegister里面" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#0e8088;shadow=0;sketch=0;glass=0;fillColor=#99FF99;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="520" y="227.5" width="210" height="30" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-65" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#000000;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-66" target="0qLJ_IpiBYj3DrSgOpRF-58" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-66" value="参数硬编码!" style="whiteSpace=wrap;html=1;rounded=1;shadow=0;glass=0;sketch=0;strokeColor=#b85450;fillColor=#f8cecc;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1530" y="295.75" width="90" height="30" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-67" value="PreDecorationFilter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#FF0000;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="310" y="977.5" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-68" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=data:image/png,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;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="270" y="600" width="271" height="104" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-69" value="&lt;b&gt;Pre-filters&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="370" y="580" width="70" height="20" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-77" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#000000;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-70" target="0qLJ_IpiBYj3DrSgOpRF-67" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-70" value="DebugFilter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="310" y="920" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-76" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#000000;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-71" target="0qLJ_IpiBYj3DrSgOpRF-70" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-71" value="FromeBodyWrapperFilter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="310" y="860" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-75" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#000000;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-72" target="0qLJ_IpiBYj3DrSgOpRF-71" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-72" value="Serverlet30WrapperFilter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="310" y="795" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-74" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#000000;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-73" target="0qLJ_IpiBYj3DrSgOpRF-72" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.75;entryY=1;entryDx=0;entryDy=0;endArrow=block;endFill=1;strokeColor=#000000;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="0qLJ_IpiBYj3DrSgOpRF-73" target="MyoVNEVpLulqhYfVUXkJ-0" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-12" value="&lt;b&gt;继承&lt;/b&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="MyoVNEVpLulqhYfVUXkJ-11" vertex="1" connectable="0"><mxGeometry x="-0.0362" y="-1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="0qLJ_IpiBYj3DrSgOpRF-73" value="ServletDetectionFilter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="310" y="730" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-0" value="ZuulFilter: zuul所有filter父类" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="65" y="630" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-1" value="filterType: pre/route/post/error" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="37.5" y="710" width="105" height="30" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="MyoVNEVpLulqhYfVUXkJ-1" target="MyoVNEVpLulqhYfVUXkJ-0" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="740" y="107.48571428571427" as="sourcePoint"/><mxPoint x="870" y="130" as="targetPoint"/></mxGeometry></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-7" value="filterOrder()&lt;br&gt;暴露自己的filter roder" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="27.5" y="765" width="125" height="30" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="MyoVNEVpLulqhYfVUXkJ-7" target="MyoVNEVpLulqhYfVUXkJ-1" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="100" y="720" as="sourcePoint"/><mxPoint x="157.51428571428573" y="677.5" as="targetPoint"/></mxGeometry></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-9" value="runFilter:&amp;nbsp;&lt;br&gt;1. 检查 isFilterDisabled() 和 shouldFilter() 是不是true.&lt;br&gt;2. 把结果包装成ZuulFilterResult()" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="50" y="810" width="195" height="60" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="MyoVNEVpLulqhYfVUXkJ-9" target="MyoVNEVpLulqhYfVUXkJ-0" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="100" y="720" as="sourcePoint"/><mxPoint x="157.51428571428573" y="677.5" as="targetPoint"/></mxGeometry></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-13" value="run()&lt;br&gt;在RequestContext里面添加request是dispatcherServletRequest的标记" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="520" y="718.75" width="210" height="60" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="MyoVNEVpLulqhYfVUXkJ-13" target="0qLJ_IpiBYj3DrSgOpRF-73" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="157.5" y="820" as="sourcePoint"/><mxPoint x="157.5" y="677.5" as="targetPoint"/></mxGeometry></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-15" value="run()&lt;br&gt;如果是dispatcherServeletRequest, 那么就把request包装成Servlet30RequestWrapper" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="520" y="783.75" width="240" height="60" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="MyoVNEVpLulqhYfVUXkJ-15" target="0qLJ_IpiBYj3DrSgOpRF-72" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="530" y="758.8" as="sourcePoint"/><mxPoint x="485" y="758.7428571428572" as="targetPoint"/></mxGeometry></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-17" value="shouldFilter()&lt;br&gt;检查request的contentType是表单才会运行, 一般不允许" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="520" y="848.75" width="210" height="60" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="MyoVNEVpLulqhYfVUXkJ-17" target="0qLJ_IpiBYj3DrSgOpRF-71" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="530" y="823.8" as="sourcePoint"/><mxPoint x="475" y="878.7714285714285" as="targetPoint"/></mxGeometry></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-19" value="run()&lt;br&gt;如果请求里有debug参数, 就设置reqContext里面的debug参数" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="520" y="914.38" width="210" height="48.75" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="MyoVNEVpLulqhYfVUXkJ-19" target="0qLJ_IpiBYj3DrSgOpRF-70" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="525" y="883.8" as="sourcePoint"/><mxPoint x="470" y="938.7714285714285" as="targetPoint"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#FF0000;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="MyoVNEVpLulqhYfVUXkJ-21" target="MyoVNEVpLulqhYfVUXkJ-29" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-21" value="run()&lt;br&gt;1. 使用helper工具类从req中提取出请求路径:&amp;nbsp;&lt;br&gt;&amp;nbsp; &amp;nbsp; /{targetService}/{路径}&lt;br&gt;2. 从routeLocator中拿到req匹配的route&lt;br&gt;&lt;b&gt;3. 从route里面提取目标服务名, 目标服务器的路径, 重试/目标服务地址/header等&amp;nbsp;&lt;font color=&quot;#ff0000&quot;&gt;设置在reqContext里面&lt;/font&gt;&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="489" y="1050" width="314" height="100" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="MyoVNEVpLulqhYfVUXkJ-23" target="0qLJ_IpiBYj3DrSgOpRF-67" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="530" y="948.8" as="sourcePoint"/><mxPoint x="485" y="948.7428571428572" as="targetPoint"/></mxGeometry></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeWidth=2;strokeColor=#FF0000;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="MyoVNEVpLulqhYfVUXkJ-23" target="MyoVNEVpLulqhYfVUXkJ-21" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-23" value="shouldFilter():&lt;br&gt;防止多次filter: 检查reqContext中是不是设置了已经完成的flag" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="541" y="971.88" width="210" height="48.75" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#000000;strokeWidth=2;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="MyoVNEVpLulqhYfVUXkJ-25" target="MyoVNEVpLulqhYfVUXkJ-36" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-25" value="SimpleRouteLocator" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1240" y="977.5" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-26" value="routes: &amp;lt;URL, ZuulRoute&amp;gt;" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1430" y="981.2600000000002" width="157.5" height="30" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="MyoVNEVpLulqhYfVUXkJ-26" target="MyoVNEVpLulqhYfVUXkJ-25" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="347.5" y="875.6300000000002" as="sourcePoint"/><mxPoint x="347.5" y="733.1300000000002" as="targetPoint"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF0000;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="MyoVNEVpLulqhYfVUXkJ-29" target="6xyo5acUqGfW4u_HP9qm-4" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-29" value="getMatchingRoute(str: URL):&lt;br&gt;1. 遍历自己拿着的locator, 依次调用看看能不能拿到URL对应的route, 拿到route就返回" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="850.5" y="1070" width="235" height="60" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="MyoVNEVpLulqhYfVUXkJ-29" target="6xyo5acUqGfW4u_HP9qm-0" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1121.25" y="945" as="sourcePoint"/><mxPoint x="1035.0238095238094" y="913.1299999999999" as="targetPoint"/></mxGeometry></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#000000;strokeWidth=2;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="MyoVNEVpLulqhYfVUXkJ-32" target="MyoVNEVpLulqhYfVUXkJ-25" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-35" value="继承" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="MyoVNEVpLulqhYfVUXkJ-34" vertex="1" connectable="0"><mxGeometry x="-0.7465" relative="1" as="geometry"><mxPoint y="-6.5" as="offset"/></mxGeometry></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-32" value="DiscoveryClietnRouteLocator" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1240" y="1050.0000000000002" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="MyoVNEVpLulqhYfVUXkJ-36" value="RouteLocator" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;dashed=1;dashPattern=1 1;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1070" y="870" width="165" height="20.63" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-0" value="CompositeRouteLocator: &lt;br&gt;聚合所有的routeLocator" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="885.5" y="977.5099999999999" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-0" target="MyoVNEVpLulqhYfVUXkJ-23" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="551" y="1006.3" as="sourcePoint"/><mxPoint x="485" y="1006.3" as="targetPoint"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;endArrow=block;endFill=1;strokeColor=#000000;strokeWidth=2;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-0" target="MyoVNEVpLulqhYfVUXkJ-36" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1367.5" y="1220.0000000000002" as="sourcePoint"/><mxPoint x="1275" y="1124.69" as="targetPoint"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-3" value="继承" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="6xyo5acUqGfW4u_HP9qm-2" vertex="1" connectable="0"><mxGeometry x="-0.7465" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-4" value="getMatchingRoute(str: URL):&lt;br&gt;1. 先匹配一下url是否在ignore里面&lt;br&gt;2. 从routes里面匹配到URL适合的zuulRoute, 把各种参数简单包装成Route返回" style="rounded=1;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1195" y="1100" width="255" height="60" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-4" target="MyoVNEVpLulqhYfVUXkJ-32" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="957.5" y="1060" as="sourcePoint"/><mxPoint x="957.5" y="1025" as="targetPoint"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-10" target="6xyo5acUqGfW4u_HP9qm-11" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-10" value="RibbonRoutingFilter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#FF0000;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="315" y="1339" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-11" target="6xyo5acUqGfW4u_HP9qm-12" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-11" value="SimpleHostRoutingFilter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="315" y="1412" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-12" value="SendForwardFilter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="315" y="1485" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#FF0000;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-15" target="6xyo5acUqGfW4u_HP9qm-21" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-27" value="1.包装" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="6xyo5acUqGfW4u_HP9qm-26" vertex="1" connectable="0"><mxGeometry x="-0.2483" y="8" relative="1" as="geometry"><mxPoint x="1" as="offset"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF0000;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-15" target="6xyo5acUqGfW4u_HP9qm-24" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-33" value="2. 创建和执行" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="6xyo5acUqGfW4u_HP9qm-32" vertex="1" connectable="0"><mxGeometry x="-0.3751" y="-15" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-15" value="shouldFIlter()&lt;br&gt;检查reqContext中有req的routeHost, 没有目标service名字, 还有配置里应该有&lt;span style=&quot;font-family: &amp;#34;jetbrains mono&amp;#34; , monospace ; font-size: 9.8pt&quot;&gt;&lt;font color=&quot;#067d17&quot;&gt;sendZuulResponse=true&lt;/font&gt;&lt;br&gt;run() -&lt;/span&gt;&lt;b style=&quot;font-family: &amp;#34;jetbrains mono&amp;#34; , monospace ; font-size: 13.0667px&quot;&gt;转发到一个ribbon服务中&lt;/b&gt;&lt;span style=&quot;font-family: &amp;#34;jetbrains mono&amp;#34; , monospace ; font-size: 9.8pt&quot;&gt;&lt;br&gt;1. 从reqContext里拿serverId,request数据等,组装好ribbonCommandContext&lt;br&gt;2. 创建ribbonCommand, 然后执行ribbonCommand&lt;br&gt;3. 拿到httpResponse, 设置到reqContext里&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="533" y="1237" width="369" height="123.13" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-15" target="6xyo5acUqGfW4u_HP9qm-10" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="558" y="1302.79" as="sourcePoint"/><mxPoint x="508" y="1357.79" as="targetPoint"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-17" value="&lt;span style=&quot;font-family: &amp;#34;jetbrains mono&amp;#34; , monospace ; font-size: 9.8pt&quot;&gt;shouldFilter()&amp;nbsp;&lt;br&gt;检查前面的filter有没有转发完成了&lt;br&gt;run()-&lt;b&gt;转发到一个地址&lt;/b&gt;&lt;br&gt;1. 从reqContext里面拿,组装好header, param, body..&lt;br&gt;2. 使用httpClient发送出去, 把响应码和东西set在reqContext里面&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="533" y="1372.4199999999998" width="305" height="116.66" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-17" target="6xyo5acUqGfW4u_HP9qm-11" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="534" y="1367.7450000000001" as="sourcePoint"/><mxPoint x="490" y="1367.7450000000001" as="targetPoint"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-19" value="&lt;span style=&quot;font-family: &amp;#34;jetbrains mono&amp;#34; , monospace ; font-size: 9.8pt&quot;&gt;shouldFilter()&amp;nbsp;&lt;br&gt;检查前面的filter有没有转发完成了&lt;br&gt;run()&lt;br&gt;&lt;b&gt;把请求转发到本机器的web路径上&lt;/b&gt;&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="533" y="1500" width="305" height="63" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-19" target="6xyo5acUqGfW4u_HP9qm-12" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="543" y="1440.75" as="sourcePoint"/><mxPoint x="490" y="1440.75" as="targetPoint"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-21" value="RibbonCommandContext:&lt;br&gt;reqest所有数据和serverName" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1033" y="1241" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-22" value="(HttpClient)RibbonCommandFactory:&lt;br&gt;创建ribbonCommand" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1068" y="1289" width="244" height="39" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-23" target="6xyo5acUqGfW4u_HP9qm-39" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-41" value="继承" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="6xyo5acUqGfW4u_HP9qm-40" vertex="1" connectable="0"><mxGeometry x="0.134" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-23" value="RibbonCommand" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1107.5" y="1493" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF0000;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-24" target="6xyo5acUqGfW4u_HP9qm-23" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-36" value="3. 创建" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="6xyo5acUqGfW4u_HP9qm-34" vertex="1" connectable="0"><mxGeometry x="0.0909" y="-3" relative="1" as="geometry"><mxPoint x="4" y="-2" as="offset"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-24" value="create(ribbonCommandContext)&lt;br&gt;从context中取数据, 包装成ribbonCommand&lt;br&gt;1. 从ribbon的springClientFactory中拿到serverId的spring里面的RibbonLoadBalanceingHttpClient&lt;br&gt;2. 再拿到serverId的spring里面的ZoneAwareLoadBalancer, 设置到httpClient里&lt;br&gt;3. 包装成HttpClientRibbonCommand" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1028" y="1351" width="324" height="106" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-24" target="6xyo5acUqGfW4u_HP9qm-22" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="624" y="1310.1" as="sourcePoint"/><mxPoint x="571" y="1371.8" as="targetPoint"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-28" value="RibbonLoadBalacingHttpCLient" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1400.75" y="1536.0000000000002" width="157.5" height="30" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-29" value="ZoneAwareLoadBalancer" style="ellipse;whiteSpace=wrap;html=1;rounded=0;fillColor=#fff9e7;align=center;strokeColor=#ffcd5a;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1584.25" y="1591.0000000000002" width="157.5" height="30" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-29" target="6xyo5acUqGfW4u_HP9qm-28" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1200" y="1361" as="sourcePoint"/><mxPoint x="1200" y="1338" as="targetPoint"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-28" target="6xyo5acUqGfW4u_HP9qm-23" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1603.75" y="1456" as="sourcePoint"/><mxPoint x="1534.75" y="1426.0000000000002" as="targetPoint"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#FF0000;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-35" target="6xyo5acUqGfW4u_HP9qm-42" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-35" value="&lt;b&gt;execute: 调用hystrixCommand熔断那一套.&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1065" y="1560" width="250" height="28" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF0000;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-23" target="6xyo5acUqGfW4u_HP9qm-35" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1200" y="1467" as="sourcePoint"/><mxPoint x="1200" y="1503" as="targetPoint"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-38" value="command执行" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="6xyo5acUqGfW4u_HP9qm-37" vertex="1" connectable="0"><mxGeometry x="0.0909" y="-3" relative="1" as="geometry"><mxPoint x="4" y="-8.5" as="offset"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-39" value="HystrixCommand" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#B3FF66;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1346" y="1480" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-48" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;strokeColor=#FF0000;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-42" target="6xyo5acUqGfW4u_HP9qm-44" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-49" value="发送" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="6xyo5acUqGfW4u_HP9qm-48" vertex="1" connectable="0"><mxGeometry x="-0.3294" y="-15" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-42" value="run(): hystrix熔断增强的真实内容&lt;br&gt;1. 包装一个clientRequest&lt;br&gt;2. 使用httpClient发出去" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1101.5" y="1617" width="177" height="54" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;strokeColor=#FF0000;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-44" target="6xyo5acUqGfW4u_HP9qm-29" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-47" value="拿到server" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="6xyo5acUqGfW4u_HP9qm-46" vertex="1" connectable="0"><mxGeometry x="-0.3437" y="1" relative="1" as="geometry"><mxPoint as="offset"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-44" value="executeWithLoadBalancer" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1391" y="1629" width="177" height="29" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;fillColor=#fff2cc;dashed=1;strokeColor=#FFD966;endArrow=none;endFill=0;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-44" target="6xyo5acUqGfW4u_HP9qm-28" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1628" y="1682.0000000000005" as="sourcePoint"/><mxPoint x="1523.25" y="1662" as="targetPoint"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-57" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF0000;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-51" target="6xyo5acUqGfW4u_HP9qm-56" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-51" value="SendResponseFilter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#FF0000;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="317" y="1775" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="399.4705882352944" y="1921" as="targetPoint"/></mxGeometry></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-55" value="&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;&lt;b&gt;hystrix和ribbon+eureka整合在zuul里&lt;/b&gt;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;1. 通过创建一个zuulFilter, 拦截住route阶段&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;2. 实现hystrix的command, 整合hystrix的熔断功能&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;3. 创建ribbon的loadBalancer增强,&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;整合ribbon的spring容器, 从zoneAwareLoadBalancer, 找到eureka的入口&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;4. 从eurekaServer拿到server, 构建出route,&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: left&quot;&gt;&lt;span&gt;完成filter的使命&lt;/span&gt;&lt;/div&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="1379" y="1284" width="392" height="99" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-56" value="&lt;span style=&quot;font-family: &amp;#34;jetbrains mono&amp;#34; , monospace ; font-size: 9.8pt&quot;&gt;shouldFilter()&amp;nbsp;&lt;br&gt;reqContext里面没有报错信息, 而且有响应信息&lt;br&gt;&lt;br&gt;run()-&lt;b&gt;响应流&lt;/b&gt;&lt;br&gt;把httpResponse响应成流输出出去.&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="541" y="1750.96" width="305" height="85.58" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-58" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#FF0000;strokeWidth=2;" parent="0qLJ_IpiBYj3DrSgOpRF-1" source="6xyo5acUqGfW4u_HP9qm-59" target="6xyo5acUqGfW4u_HP9qm-60" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-59" value="SendResponseFilter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0fff5;align=center;strokeColor=#FF0000;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="315" y="1953.04" width="165" height="37.5" as="geometry"/></mxCell><mxCell id="6xyo5acUqGfW4u_HP9qm-60" value="&lt;span style=&quot;font-family: &amp;#34;jetbrains mono&amp;#34; , monospace ; font-size: 9.8pt&quot;&gt;run()-&lt;b&gt;转发到spring的errorController&lt;/b&gt;&lt;br&gt;&lt;/span&gt;" style="rounded=0;whiteSpace=wrap;html=1;shadow=0;glass=0;sketch=0;align=left;" parent="0qLJ_IpiBYj3DrSgOpRF-1" vertex="1"><mxGeometry x="541" y="1948.29" width="305" height="47" as="geometry"/></mxCell><mxCell id="PrJnPCeMI1ZcOd0JqbmL-0" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=data:image/png,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;" vertex="1" parent="0qLJ_IpiBYj3DrSgOpRF-1"><mxGeometry x="-28.770000000000003" y="1335" width="307.54" height="93" as="geometry"/></mxCell><mxCell id="PrJnPCeMI1ZcOd0JqbmL-1" value="&lt;b&gt;Route-filters&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="0qLJ_IpiBYj3DrSgOpRF-1"><mxGeometry x="85" y="1316" width="80" height="18" as="geometry"/></mxCell><mxCell id="PrJnPCeMI1ZcOd0JqbmL-2" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=data:image/png,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;" vertex="1" parent="0qLJ_IpiBYj3DrSgOpRF-1"><mxGeometry x="-34.769999999999996" y="1953.0399023437499" width="301" height="52" as="geometry"/></mxCell><mxCell id="PrJnPCeMI1ZcOd0JqbmL-3" value="" style="shape=image;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;aspect=fixed;imageAspect=0;image=data:image/png,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;" vertex="1" parent="0qLJ_IpiBYj3DrSgOpRF-1"><mxGeometry x="-28.77000000000001" y="1698.0000244140624" width="289" height="56" as="geometry"/></mxCell><mxCell id="PrJnPCeMI1ZcOd0JqbmL-4" value="&lt;b&gt;Post-filters&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="0qLJ_IpiBYj3DrSgOpRF-1"><mxGeometry x="78" y="1680" width="72" height="18" as="geometry"/></mxCell><mxCell id="PrJnPCeMI1ZcOd0JqbmL-6" value="&lt;b&gt;Error-filters&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;" vertex="1" parent="0qLJ_IpiBYj3DrSgOpRF-1"><mxGeometry x="77.73" y="1937" width="76" height="18" as="geometry"/></mxCell></root></mxGraphModel></diagram></mxfile>